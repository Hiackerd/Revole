<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revole Heist - Snack Lieferdienst</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1a1a2e;
            --secondary: #16213e;
            --accent: #e94560;
            --text: #f1f1f1;
            --card-bg: #0f3460;
            --light-bg: #2d4059;
            --success: #4CAF50;
            --warning: #ff9800;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--primary);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            padding-bottom: 80px;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* Header Mobile */
        header {
            background-color: var(--secondary);
            padding: 1rem 15px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .auth-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .user-menu {
            display: none;
            align-items: center;
            gap: 10px;
        }
        
        .user-menu.active {
            display: flex;
        }
        
        .user-greeting {
            font-size: 0.9rem;
            color: var(--text);
        }
        
        .logout-btn {
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--text);
            padding: 6px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
        }
        
        .cart-icon {
            position: relative;
            font-size: 1.4rem;
        }
        
        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--accent);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        /* Mobile Navigation */
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--secondary);
            display: flex;
            justify-content: space-around;
            padding: 12px 10px;
            border-top: 2px solid var(--accent);
            z-index: 1000;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            background: none;
            border: none;
            color: var(--text);
            font-size: 0.8rem;
            padding: 8px 12px;
            border-radius: 12px;
            transition: all 0.3s ease;
            min-height: 44px;
        }
        
        .nav-item.active {
            background: var(--accent);
            color: white;
        }
        
        .nav-item i {
            font-size: 1.2rem;
        }
        
        /* Hauptinhalt */
        .main-content {
            margin-top: 70px;
            margin-bottom: 70px;
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            padding: 2rem 1rem;
            text-align: center;
            border-radius: 0 0 20px 20px;
            margin-bottom: 1rem;
        }
        
        .hero-content h1 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, var(--accent), #ff7b9c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .hero-content p {
            font-size: 1rem;
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(45deg, var(--accent), #ff2e4f);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(233, 69, 96, 0.4);
        }
        
        /* Kategorien */
        .categories {
            padding: 1.5rem 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            color: var(--accent);
        }
        
        .category-buttons {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        
        .category-buttons::-webkit-scrollbar {
            display: none;
        }
        
        .category-btn {
            background: var(--card-bg);
            border: none;
            color: var(--text);
            padding: 12px 20px;
            border-radius: 25px;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            min-height: 44px;
        }
        
        .category-btn.active {
            background: var(--accent);
        }
        
        /* Produkte */
        .products {
            padding: 1rem 0;
        }
        
        .product-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            padding: 0 5px;
        }
        
        .product-card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .product-image-container {
            height: 140px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
        }
        
        .product-image {
            max-height: 80%;
            max-width: 80%;
            object-fit: contain;
        }
        
        .product-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--accent);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
        }
        
        .product-info {
            padding: 1rem;
        }
        
        .product-title {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }
        
        .product-price {
            color: var(--accent);
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }
        
        .buy-btn {
            width: 100%;
            background: var(--accent);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 44px;
        }
        
        /* Warenkorb */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100vh;
            background: var(--secondary);
            transition: right 0.3s ease;
            z-index: 2000;
            display: flex;
            flex-direction: column;
        }
        
        .cart-sidebar.active {
            right: 0;
        }
        
        .cart-header {
            padding: 1rem;
            background: var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--accent);
        }
        
        .cart-title {
            font-size: 1.3rem;
            color: var(--accent);
            font-weight: bold;
        }
        
        .close-cart {
            background: none;
            border: none;
            color: var(--text);
            font-size: 1.5rem;
            min-height: 44px;
            min-width: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .cart-items {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
        }
        
        .cart-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            background: var(--card-bg);
            border-radius: 10px;
            margin-bottom: 1rem;
            gap: 1rem;
        }
        
        .cart-item-image {
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .cart-item-image img {
            max-width: 80%;
            max-height: 80%;
        }
        
        .cart-item-info {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: bold;
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
        }
        
        .cart-item-price {
            color: var(--accent);
            font-size: 0.9rem;
        }
        
        .cart-footer {
            padding: 1rem;
            background: var(--primary);
            border-top: 2px solid var(--accent);
        }
        
        .service-fee {
            display: flex;
            justify-content: space-between;
            color: var(--warning);
            font-weight: bold;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--light-bg);
        }
        
        .checkout-btn {
            width: 100%;
            background: var(--accent);
            color: white;
            border: none;
            padding: 16px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 12px;
            min-height: 44px;
        }
        
        .checkout-btn:disabled {
            background: var(--light-bg);
            opacity: 0.6;
        }
        
        /* Auth Popup */
        .auth-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            padding: 1rem;
        }
        
        .auth-popup.active {
            display: flex;
        }
        
        .auth-content {
            background: var(--secondary);
            padding: 2rem 1.5rem;
            border-radius: 15px;
            width: 100%;
            max-width: 400px;
            border: 2px solid var(--accent);
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--light-bg);
        }
        
        .auth-tab {
            flex: 1;
            padding: 1rem;
            background: none;
            border: none;
            color: var(--text);
            font-size: 1rem;
            min-height: 44px;
        }
        
        .auth-tab.active {
            color: var(--accent);
            border-bottom: 3px solid var(--accent);
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .auth-input {
            width: 100%;
            padding: 14px;
            margin-bottom: 1rem;
            background: var(--card-bg);
            border: 2px solid var(--light-bg);
            border-radius: 10px;
            color: var(--text);
            font-size: 16px; /* Verhindert Zoom auf iOS */
        }
        
        .auth-submit {
            width: 100%;
            background: var(--accent);
            color: white;
            border: none;
            padding: 16px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 10px;
            margin-top: 1rem;
            min-height: 44px;
        }
        
        .demo-credentials {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        
        /* Bestellverlauf */
        .orders-sidebar {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100vh;
            background: var(--secondary);
            transition: right 0.3s ease;
            z-index: 2000;
            display: flex;
            flex-direction: column;
        }
        
        .orders-sidebar.active {
            right: 0;
        }
        
        .orders-content {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
        }
        
        .order-section {
            margin-bottom: 2rem;
        }
        
        .order-section-title {
            color: var(--accent);
            font-size: 1.2rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--light-bg);
        }
        
        .order-card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--accent);
        }
        
        .order-card.completed {
            border-left-color: var(--success);
            opacity: 0.7;
        }
        
        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .order-id {
            font-weight: bold;
            color: var(--accent);
            font-size: 0.9rem;
        }
        
        .order-status {
            background: var(--accent);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .order-status.completed {
            background: var(--success);
        }
        
        .order-items {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 0.5rem;
        }
        
        .order-total {
            font-weight: bold;
            color: var(--accent);
        }
        
        /* Payment Popup */
        .payment-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            padding: 1rem;
        }
        
        .payment-popup.active {
            display: flex;
        }
        
        .popup-content {
            background: var(--secondary);
            padding: 2rem 1.5rem;
            border-radius: 15px;
            width: 100%;
            max-width: 400px;
            border: 2px solid var(--accent);
            text-align: center;
        }
        
        .warning-icon {
            font-size: 3rem;
            color: var(--warning);
            margin-bottom: 1rem;
        }
        
        .popup-title {
            color: var(--warning);
            font-size: 1.4rem;
            margin-bottom: 1rem;
            font-weight: bold;
        }
        
        .important-note {
            background: rgba(255, 152, 0, 0.2);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            text-align: left;
            font-size: 0.9rem;
        }
        
        .service-fee-popup {
            background: rgba(233, 69, 96, 0.2);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-weight: bold;
        }
        
        .warning-text {
            color: var(--accent);
            font-weight: bold;
            margin: 1rem 0;
            font-size: 0.9rem;
        }
        
        .popup-buttons {
            display: flex;
            gap: 10px;
            margin-top: 1.5rem;
        }
        
        .popup-btn {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 44px;
        }
        
        .popup-cancel {
            background: var(--card-bg);
            color: var(--text);
        }
        
        .popup-confirm {
            background: var(--warning);
            color: black;
        }
        
        .countdown {
            color: var(--warning);
            font-weight: bold;
            margin-top: 1rem;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--accent);
            color: white;
            padding: 12px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 4000;
            max-width: 90%;
            text-align: center;
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
        
        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-screen.hidden {
            display: none;
        }
        
        .loader {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(233, 69, 96, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent);
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Tablet */
        @media (min-width: 768px) {
            .container {
                max-width: 720px;
                padding: 0 20px;
            }
            
            .product-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
            
            .cart-sidebar,
            .orders-sidebar {
                width: 400px;
                right: -400px;
            }
        }
        
        /* Desktop */
        @media (min-width: 1024px) {
            .container {
                max-width: 1200px;
            }
            
            .product-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .mobile-nav {
                display: none;
            }
            
            body {
                padding-bottom: 0;
            }
            
            .main-content {
                margin-bottom: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen">
        <div class="loader"></div>
        <div>Revole Heist lädt...</div>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-store"></i>
                    Revole Heist
                </div>
                <div class="header-actions">
                    <div class="auth-buttons" id="authButtons">
                        <button class="auth-btn" id="loginBtn">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                    </div>
                    <div class="user-menu" id="userMenu">
                        <span class="user-greeting" id="userGreeting"></span>
                        <button class="logout-btn" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                    <div class="cart-icon" id="cartIcon">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count">0</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Hauptinhalt -->
    <div class="main-content">
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>Snacks direkt zu dir</h1>
                    <p>Beste Snacks aus der Nachbarschaft - schnell geliefert!</p>
                    <a href="#products" class="cta-button">
                        <i class="fas fa-bolt"></i> Jetzt bestellen
                    </a>
                </div>
            </div>
        </section>

        <!-- Kategorien -->
        <section class="categories" id="categories">
            <div class="container">
                <h2 class="section-title">Kategorien</h2>
                <div class="category-buttons">
                    <button class="category-btn active" data-category="all">
                        <i class="fas fa-th-large"></i> Alle
                    </button>
                    <button class="category-btn" data-category="getraenke">
                        <i class="fas fa-wine-bottle"></i> Getränke
                    </button>
                    <button class="category-btn" data-category="suessigkeiten">
                        <i class="fas fa-cookie"></i> Süßes
                    </button>
                    <button class="category-btn" data-category="chips">
                        <i class="fas fa-pizza-slice"></i> Chips
                    </button>
                </div>
            </div>
        </section>

        <!-- Produkte -->
        <section class="products" id="products">
            <div class="container">
                <div class="product-grid" id="productGrid">
                    <!-- Produkte werden via JavaScript geladen -->
                </div>
            </div>
        </section>
    </div>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
        <button class="nav-item active" data-section="products">
            <i class="fas fa-home"></i>
            <span>Shop</span>
        </button>
        <button class="nav-item" id="navOrders">
            <i class="fas fa-clipboard-list"></i>
            <span>Bestellungen</span>
        </button>
        <button class="nav-item" id="navAccount">
            <i class="fas fa-user"></i>
            <span>Account</span>
        </button>
        <button class="nav-item" id="navCart">
            <i class="fas fa-shopping-cart"></i>
            <span>Warenkorb</span>
        </button>
    </nav>

    <!-- Warenkorb Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3 class="cart-title">Warenkorb</h3>
            <button class="close-cart" id="closeCart">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Warenkorb Items -->
        </div>
        <div class="cart-footer">
            <div class="service-fee">
                <span>Servicegebühr:</span>
                <span>0,50€</span>
            </div>
            <div class="cart-total">
                <span>Gesamt:</span>
                <span id="cartTotal">0,00€</span>
            </div>
            <button class="checkout-btn" id="checkoutBtn" disabled>
                <i class="fas fa-shopping-bag"></i> Bestellen
            </button>
        </div>
    </div>

    <!-- Bestellverlauf -->
    <div class="orders-sidebar" id="ordersSidebar">
        <div class="cart-header">
            <h3 class="cart-title">Meine Bestellungen</h3>
            <button class="close-cart" id="closeOrders">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="orders-content" id="ordersContent">
            <!-- Bestellungen -->
        </div>
    </div>

    <!-- Login/Registrierung -->
    <div class="auth-popup" id="authPopup">
        <div class="auth-content">
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Login</button>
                <button class="auth-tab" data-tab="register">Registrieren</button>
            </div>
            
            <form class="auth-form active" id="loginForm">
                <input type="text" class="auth-input" placeholder="Benutzername" value="demo">
                <input type="password" class="auth-input" placeholder="Passwort" value="demo123">
                <button type="submit" class="auth-submit">
                    <i class="fas fa-sign-in-alt"></i> Einloggen
                </button>
                <div class="demo-credentials">
                    <strong>Demo Login:</strong><br>
                    Benutzername: demo<br>
                    Passwort: demo123
                </div>
            </form>
            
            <form class="auth-form" id="registerForm">
                <input type="text" class="auth-input" placeholder="Benutzername">
                <input type="email" class="auth-input" placeholder="E-Mail">
                <input type="password" class="auth-input" placeholder="Passwort">
                <button type="submit" class="auth-submit">
                    <i class="fas fa-user-plus"></i> Registrieren
                </button>
                <div class="demo-credentials">
                    <strong>Demo Modus:</strong><br>
                    Jede Registrierung funktioniert!
                </div>
            </form>
        </div>
    </div>

    <!-- Payment Popup -->
    <div class="payment-popup" id="paymentPopup">
        <div class="popup-content">
            <div class="warning-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h2 class="popup-title">Wichtiger Hinweis</h2>
            
            <div class="important-note">
                <strong>Keine 100% Garantie!</strong><br>
                Community-Service - abhängig von Lieferanten-Verfügbarkeit.
            </div>
            
            <div class="service-fee-popup">
                Servicegebühr: 0,50€ pro Bestellung
            </div>
            
            <div class="warning-text">
                BEI NICHTZAHLUNG: Account-Sperre nach 24h!
            </div>
            
            <div class="popup-buttons">
                <button class="popup-btn popup-cancel" id="cancelOrder">
                    <i class="fas fa-times"></i> Abbrechen
                </button>
                <button class="popup-btn popup-confirm" id="confirmOrder">
                    <i class="fas fa-check"></i> Akzeptieren
                </button>
            </div>
            
            <div class="countdown" id="countdown">
                Bestätigung in 10s...
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <span id="notification-text"></span>
    </div>

    <script>
        // GitHub Konfiguration
        const GITHUB_USERNAME = 'Hiackerd';
        const REPO_NAME = 'Revole';
        const IMAGE_FOLDER = 'Fotos';
        const GITHUB_BASE_URL = `https://raw.githubusercontent.com/${GITHUB_USERNAME}/${REPO_NAME}/main/${IMAGE_FOLDER}/`;

        // Produktdaten
        const products = {
            getraenke: [
                { name: "Coca Cola", price: 1.79, image: GITHUB_BASE_URL + "Cola.png", badge: "Bestseller" },
                { name: "Fanta Orange", price: 1.69, image: GITHUB_BASE_URL + "Fanta.png" },
                { name: "Fanta Blau", price: 1.69, image: GITHUB_BASE_URL + "FantaBlau.png" },
                { name: "Fanta Exotic", price: 1.69, image: GITHUB_BASE_URL + "FantaExotisch.png" },
                { name: "Powerade", price: 1.89, image: GITHUB_BASE_URL + "PowerRade.png", badge: "Neu" },
                { name: "Red Bull", price: 2.19, image: GITHUB_BASE_URL + "RedBull.png" },
                { name: "Mio Mio", price: 1.49, image: GITHUB_BASE_URL + "MioMio.png" },
                { name: "Capri-Sun", price: 0.99, image: GITHUB_BASE_URL + "CapriSun.png", badge: "Populär" }
            ],
            suessigkeiten: [
                { name: "Milka Alpenmilch", price: 1.49, image: GITHUB_BASE_URL + "Milka.png" },
                { name: "Milka Haselnuss", price: 1.59, image: GITHUB_BASE_URL + "MilkaHasel.png" },
                { name: "Milka Oreo", price: 1.69, image: GITHUB_BASE_URL + "MilkaOreo.png", badge: "Neu" },
                { name: "Milka Erdbeer", price: 1.59, image: GITHUB_BASE_URL + "MilkaErdberre.png" },
                { name: "Milka Weiße Schokolade", price: 1.59, image: GITHUB_BASE_URL + "MilkaWhite.png" },
                { name: "Milka Tuc", price: 1.69, image: GITHUB_BASE_URL + "MilkaTuc.png" },
                { name: "Oreos", price: 2.49, image: GITHUB_BASE_URL + "Oreos.png", badge: "Bestseller" },
                { name: "Leibniz Kekse", price: 1.79, image: GITHUB_BASE_URL + "Leipniz.png" },
                { name: "Prinzen Rolle", price: 1.99, image: GITHUB_BASE_URL + "PrimzenRolle.png" }
            ],
            chips: [
                { name: "Pringles Original", price: 2.99, image: GITHUB_BASE_URL + "PringelsOrginal.png" },
                { name: "Pringles Paprika", price: 2.99, image: GITHUB_BASE_URL + "PringelsPaprika.png" },
                { name: "Pringles Sour Cream", price: 2.99, image: GITHUB_BASE_URL + "PrigelsSourer.png", badge: "Beliebt" }
            ]
        };

        // App State
        let cart = [];
        let orders = [];
        let currentUser = null;
        let countdownTimer;

        // DOM Elements
        const elements = {
            loadingScreen: document.querySelector('.loading-screen'),
            productGrid: document.getElementById('productGrid'),
            cartIcon: document.getElementById('cartIcon'),
            cartCount: document.querySelector('.cart-count'),
            cartSidebar: document.getElementById('cartSidebar'),
            cartItems: document.getElementById('cartItems'),
            cartTotal: document.getElementById('cartTotal'),
            checkoutBtn: document.getElementById('checkoutBtn'),
            closeCart: document.getElementById('closeCart'),
            authButtons: document.getElementById('authButtons'),
            userMenu: document.getElementById('userMenu'),
            userGreeting: document.getElementById('userGreeting'),
            logoutBtn: document.getElementById('logoutBtn'),
            loginBtn: document.getElementById('loginBtn'),
            authPopup: document.getElementById('authPopup'),
            authTabs: document.querySelectorAll('.auth-tab'),
            authForms: document.querySelectorAll('.auth-form'),
            loginForm: document.getElementById('loginForm'),
            registerForm: document.getElementById('registerForm'),
            ordersSidebar: document.getElementById('ordersSidebar'),
            ordersContent: document.getElementById('ordersContent'),
            closeOrders: document.getElementById('closeOrders'),
            navOrders: document.getElementById('navOrders'),
            navAccount: document.getElementById('navAccount'),
            navCart: document.getElementById('navCart'),
            paymentPopup: document.getElementById('paymentPopup'),
            cancelOrderBtn: document.getElementById('cancelOrder'),
            confirmOrderBtn: document.getElementById('confirmOrder'),
            countdownElement: document.getElementById('countdown'),
            notification: document.getElementById('notification'),
            notificationText: document.getElementById('notification-text'),
            categoryButtons: document.querySelectorAll('.category-btn'),
            navItems: document.querySelectorAll('.nav-item')
        };

        // Initialisierung
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                elements.loadingScreen.classList.add('hidden');
            }, 1500);
            
            renderProducts();
            initEventListeners();
            loadDemoOrders();
        });

        // Produkte rendern
        function renderProducts() {
            elements.productGrid.innerHTML = '';
            
            for (const category in products) {
                products[category].forEach((product, index) => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    productCard.setAttribute('data-category', category);
                    
                    productCard.innerHTML = `
                        <div class="product-image-container">
                            ${product.badge ? `<div class="product-badge">${product.badge}</div>` : ''}
                            <img src="${product.image}" alt="${product.name}" class="product-image" 
                                 onerror="this.src='https://via.placeholder.com/200x200/0f3460/ffffff?text=Produkt'">
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">${product.name}</h3>
                            <p class="product-price">€${product.price.toFixed(2).replace('.', ',')}</p>
                            <button class="buy-btn" data-product='${JSON.stringify(product).replace(/'/g, "&apos;")}'>
                                <i class="fas fa-cart-plus"></i> In den Warenkorb
                            </button>
                        </div>
                    `;
                    
                    elements.productGrid.appendChild(productCard);
                });
            }
            
            // Event Listener für Kauf-Buttons
            document.querySelectorAll('.buy-btn').forEach(button => {
                button.addEventListener('click', handleBuyClick);
            });
        }

        // Event Listener
        function initEventListeners() {
            // Mobile Navigation
            elements.navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    handleNavClick(section);
                });
            });

            // Warenkorb
            elements.cartIcon.addEventListener('click', toggleCart);
            elements.navCart.addEventListener('click', toggleCart);
            elements.closeCart.addEventListener('click', toggleCart);
            elements.checkoutBtn.addEventListener('click', handleCheckout);

            // Auth
            elements.loginBtn.addEventListener('click', () => showAuthPopup('login'));
            elements.navAccount.addEventListener('click', () => showAuthPopup('login'));
            elements.logoutBtn.addEventListener('click', handleLogout);
            
            elements.authTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.getAttribute('data-tab');
                    switchAuthTab(tabName);
                });
            });
            
            elements.loginForm.addEventListener('submit', handleLogin);
            elements.registerForm.addEventListener('submit', handleRegister);

            // Bestellungen
            elements.navOrders.addEventListener('click', toggleOrders);
            elements.closeOrders.addEventListener('click', toggleOrders);

            // Kategorien
            elements.categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    filterProducts(category);
                });
            });

            // Payment
            elements.cancelOrderBtn.addEventListener('click', closePaymentPopup);
            elements.confirmOrderBtn.addEventListener('click', confirmOrder);
        }

        // Navigation Handler
        function handleNavClick(section) {
            elements.navItems.forEach(item => item.classList.remove('active'));
            event.target.classList.add('active');
            
            if (section === 'products') {
                // Zurück zum Shop
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else if (section === 'cart') {
                toggleCart();
            }
        }

        // Produkt Filter
        function filterProducts(category) {
            elements.categoryButtons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            document.querySelectorAll('.product-card').forEach(card => {
                if (category === 'all' || card.getAttribute('data-category') === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Kauf-Button Handler
        function handleBuyClick() {
            const productData = JSON.parse(this.getAttribute('data-product'));
            addToCart(productData);
            
            const productTitle = this.closest('.product-card').querySelector('.product-title').textContent;
            showNotification(`${productTitle} zum Warenkorb hinzugefügt!`);
        }

        // Warenkorb Funktionen
        function addToCart(product) {
            const existingItem = cart.find(item => item.name === product.name);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    ...product,
                    quantity: 1
                });
            }
            
            updateCartCount();
            updateCartDisplay();
        }

        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            elements.cartCount.textContent = totalItems;
        }

        function updateCartDisplay() {
            elements.cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                elements.cartItems.innerHTML = '<p style="text-align: center; padding: 2rem;">Dein Warenkorb ist leer</p>';
                elements.checkoutBtn.disabled = true;
                elements.cartTotal.textContent = '0,00€';
                return;
            }
            
            let total = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="cart-item-image">
                        <img src="${item.image}" alt="${item.name}" 
                             onerror="this.src='https://via.placeholder.com/50x50/0f3460/ffffff?text=Produkt'">
                    </div>
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">€${item.price.toFixed(2).replace('.', ',')} x ${item.quantity}</div>
                    </div>
                `;
                
                elements.cartItems.appendChild(cartItem);
            });
            
            total += 0.50; // Servicegebühr
            elements.cartTotal.textContent = `€${total.toFixed(2).replace('.', ',')}`;
            elements.checkoutBtn.disabled = false;
        }

        function toggleCart() {
            elements.cartSidebar.classList.toggle('active');
            updateCartDisplay();
        }

        // Auth Funktionen
        function showAuthPopup(tab = 'login') {
            elements.authPopup.classList.add('active');
            switchAuthTab(tab);
        }

        function closeAuthPopup() {
            elements.authPopup.classList.remove('active');
        }

        function switchAuthTab(tabName) {
            elements.authTabs.forEach(tab => {
                tab.classList.toggle('active', tab.getAttribute('data-tab') === tabName);
            });
            
            elements.authForms.forEach(form => {
                form.classList.toggle('active', form.id === `${tabName}Form`);
            });
        }

        function handleLogin(e) {
            e.preventDefault();
            const username = e.target.querySelector('input[type="text"]').value;
            
            currentUser = { username: username, isDemo: true };
            elements.userGreeting.textContent = `Hallo, ${username}!`;
            elements.authButtons.style.display = 'none';
            elements.userMenu.classList.add('active');
            
            closeAuthPopup();
            showNotification(`Eingeloggt als ${username}`);
            updateCartDisplay();
        }

        function handleRegister(e) {
            e.preventDefault();
            const username = e.target.querySelector('input[type="text"]').value;
            
            currentUser = { username: username, isDemo: true };
            elements.userGreeting.textContent = `Hallo, ${username}!`;
            elements.authButtons.style.display = 'none';
            elements.userMenu.classList.add('active');
            
            closeAuthPopup();
            showNotification(`Registriert als ${username}`);
            updateCartDisplay();
        }

        function handleLogout() {
            currentUser = null;
            elements.userMenu.classList.remove('active');
            elements.authButtons.style.display = 'flex';
            showNotification('Erfolgreich ausgeloggt');
        }

        // Bestellungen
        function toggleOrders() {
            if (!currentUser) {
                showNotification('Bitte einloggen um Bestellungen zu sehen');
                showAuthPopup('login');
                return;
            }
            
            elements.ordersSidebar.classList.toggle('active');
            updateOrdersDisplay();
        }

        function updateOrdersDisplay() {
            elements.ordersContent.innerHTML = '';
            
            if (orders.length === 0) {
                elements.ordersContent.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <i class="fas fa-clipboard-list" style="font-size: 3rem; color: var(--accent); margin-bottom: 1rem;"></i>
                        <p>Noch keine Bestellungen</p>
                    </div>
                `;
                return;
            }
            
            // Aktive Bestellungen
            const activeOrders = orders.filter(order => order.status !== 'Abgeschlossen');
            if (activeOrders.length > 0) {
                const activeSection = document.createElement('div');
                activeSection.className = 'order-section';
                activeSection.innerHTML = '<h4 class="order-section-title">Aktive Bestellungen</h4>';
                
                activeOrders.forEach(order => {
                    activeSection.appendChild(createOrderCard(order));
                });
                
                elements.ordersContent.appendChild(activeSection);
            }
            
            // Abgeschlossene Bestellungen
            const completedOrders = orders.filter(order => order.status === 'Abgeschlossen');
            if (completedOrders.length > 0) {
                const completedSection = document.createElement('div');
                completedSection.className = 'order-section';
                completedSection.innerHTML = '<h4 class="order-section-title">Letzte Bestellungen</h4>';
                
                completedOrders.slice(-3).forEach(order => {
                    completedSection.appendChild(createOrderCard(order));
                });
                
                elements.ordersContent.appendChild(completedSection);
            }
        }

        function createOrderCard(order) {
            const orderCard = document.createElement('div');
            orderCard.className = `order-card ${order.status === 'Abgeschlossen' ? 'completed' : ''}`;
            
            orderCard.innerHTML = `
                <div class="order-header">
                    <span class="order-id">Bestellung #${order.id}</span>
                    <span class="order-status ${order.status === 'Abgeschlossen' ? 'completed' : ''}">${order.status}</span>
                </div>
                <div class="order-items">${order.items.join(', ')}</div>
                <div class="order-total">Gesamt: €${order.total.toFixed(2).replace('.', ',')}</div>
                ${order.status !== 'Abgeschlossen' ? `<div style="font-size: 0.8rem; margin-top: 0.5rem; color: var(--success);">Geschätzte Lieferzeit: ${order.estimatedDelivery}</div>` : ''}
            `;
            
            return orderCard;
        }

        function loadDemoOrders() {
            orders = [
                {
                    id: 'RH001',
                    items: ['Coca Cola', 'Milka Alpenmilch'],
                    total: 3.78,
                    status: 'In Bearbeitung',
                    estimatedDelivery: '15-25 Minuten',
                    date: new Date()
                }
            ];
        }

        function addNewOrder(cartItems, total) {
            const newOrder = {
                id: 'RH' + (orders.length + 1).toString().padStart(3, '0'),
                items: cartItems.map(item => item.name),
                total: total,
                status: 'In Bearbeitung',
                estimatedDelivery: '15-25 Minuten',
                date: new Date()
            };
            
            orders.unshift(newOrder);
            return newOrder;
        }

        // Bestellung
        function handleCheckout() {
            if (!currentUser) {
                showNotification('Bitte einloggen um zu bestellen');
                showAuthPopup('login');
                return;
            }
            
            showPaymentPopup();
        }

        function showPaymentPopup() {
            elements.paymentPopup.classList.add('active');
            startCountdown();
        }

        function closePaymentPopup() {
            elements.paymentPopup.classList.remove('active');
            clearTimeout(countdownTimer);
        }

        function startCountdown() {
            let seconds = 10;
            elements.countdownElement.textContent = `Bestätigung in ${seconds}s...`;
            
            countdownTimer = setInterval(() => {
                seconds--;
                elements.countdownElement.textContent = `Bestätigung in ${seconds}s...`;
                
                if (seconds <= 0) {
                    clearInterval(countdownTimer);
                    closePaymentPopup();
                    showNotification("Bestellung abgebrochen - Zeit abgelaufen!");
                }
            }, 1000);
        }

        function confirmOrder() {
            clearTimeout(countdownTimer);
            closePaymentPopup();
            
            const total = parseFloat(elements.cartTotal.textContent.replace('€', '').replace(',', '.'));
            const newOrder = addNewOrder(cart, total);
            
            showNotification(`Bestellung #${newOrder.id} erfolgreich! Servicegebühr: 0,50€`);
            
            cart = [];
            updateCartCount();
            updateCartDisplay();
            toggleCart();
            updateOrdersDisplay();
        }

        // Notification
        function showNotification(message) {
            elements.notificationText.textContent = message;
            elements.notification.classList.add('show');
            
            setTimeout(() => {
                elements.notification.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
